{% extends 'base.html' %}
{% load static %}
{% load faq_tags %}

{% block title %}Form - COE Car Renewal{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'apploan/css/form-car.css' %}">
{% endblock %}

{% block content %}

<header class="hero-header">
    <div class="hero-content">
        <h1>Get Instant Approval for Your COE Renewal Car Loan in Less Than a Minute</h1>
    </div>
</header>

<section class="card-container mb-5">
    <div class="card">

        <!-- LEFT IMAGE -->
        <div class="card-image">
            <img src="{% static 'apploan/images/cars-form.jpg' %}" alt="Car Image">
        </div>

        <!-- RIGHT FORM -->
        <div class="card-content">
            <h2>Renew Your Car COE Now!</h2>

            <form method="POST" action="{% url 'formCar' %}">
                {% csrf_token %}

                <label>Full Name </label>
                {{ form.full_name }}

                <label>Contact Number </label>
                {{ form.contact_number }}

                <label>Email Address </label>
                {{ form.email }}

                <div class="checkbox-container">
                    {{ form.consent }}
                    <label for="{{ form.consent.id_for_label }}">
                        I agree to be contacted via email, phone call and/or SMS for any purpose in connection with my loan application and other vehicle transactions
                        by SGVehicleLoans Pte Ltd, in accordance with the Personal Data Protection Act of 2012.
                    </label>
                </div>

                <button type="submit">RENEW MY COE</button>
            </form>
            
        </div>

    </div>
</section>

<!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <div class="modal-body">
        <svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" fill="green" class="bi bi-check-circle mb-3" viewBox="0 0 16 16">
          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.97 11.03a.75.75 0 0 0 1.08 0l3.992-3.992a.75.75 0 1 0-1.08-1.08L7.5 9.44 5.53 7.47a.75.75 0 1 0-1.06 1.06l2.5 2.5z"/>
        </svg>
        <h5 id="modalMessage"></h5>
        <button type="button" class="btn btn-success mt-3" data-bs-dismiss="modal">OK!</button>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    {% if messages %}
        const message = `{% for m in messages %}{{ m|escapejs }}{% endfor %}`;
        document.getElementById("modalMessage").innerText = message;

        const successModal = new bootstrap.Modal(document.getElementById('successModal'));
        successModal.show();
    {% endif %}
});
</script>


<style>
    label:has(+ input[required]),
label:has(+ select[required]),
label:has(+ textarea[required]) {
  font-weight: 500;
}

label:has(+ input[required])::after,
label:has(+ select[required])::after,
label:has(+ textarea[required])::after {
  content: " *";
  color: red;
  font-weight: bold;
}
</style>

{% endblock %}
