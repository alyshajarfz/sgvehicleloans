{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512‑..." crossorigin="anonymous" referrerpolicy="no-referrer" />  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">


    {% block extra_css %}{% endblock %}



    {% comment %}from django.views.generic import TemplateView
from django.shortcuts import render
from .models import COECatD
from datetime import datetime
from collections import defaultdict
import math
from common.mixins import MobileViewMixin

class COEchartView(MobileViewMixin, TemplateView): 

    template_name = "coe/coe-chart.html"

    # Each month will have 1 or 2 entries (1st bid and 2nd bid). : Important: only months with 2 premiums (both bids) are considered "complete").
    def get_completed_months(self, cat_d_records):
        monthly = defaultdict(list)
        for r in cat_d_records:
            month_key = r["date"].strftime("%Y-%m")
            monthly[month_key].append(r["premium"])

	    # Only months with 2 bids are complete
        completed = {m: premiums for m, premiums in monthly.items() if len(premiums) == 2}
        return completed

	# Calculates PQP for each month based on the previous 3 completed months.
    def calculate_pqp(self, completed_months):

        # PQP = (sum of 1st+2nd bids for last 3 months) / 6
        sorted_months = sorted(completed_months.keys())
        pqp_map = {}
        for i in range(2, len(sorted_months)):
            prev_3_months = sorted_months[i-2:i+1]
            premiums = []
            for m in prev_3_months:
                premiums.extend(completed_months[m])
            pqp_map[sorted_months[i]] = math.ceil(sum(premiums) / len(premiums))
        return pqp_map

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)

        # Orders by month and bidding_no so 1st and 2nd bid are in correct order.
        records = COECatD.objects.all().order_by('month', 'bidding_no')

        cat_d_records = []
        for r in records:
            cat_d_records.append({
                "date": r.month,
                "premium": r.premium,
                "quota": r.quota,
                "bids": getattr(r, "bids_received", r.bids_success)
            })

        completed_months = self.get_completed_months(cat_d_records)
        pqp_map = self.calculate_pqp(completed_months)

        # Determine the latest PQP value (use last completed month) : if 2nd bid not yet given, show the most recent PQP.
        # If the latest month is incomplete (only 1st bid exists), we still display the last known PQP instead of 0.
        data = []
        if completed_months:
            last_completed_month = sorted(completed_months.keys())[-1]
            latest_pqp_value = pqp_map.get(last_completed_month, 0)
        else:
            latest_pqp_value = 0

        for r in cat_d_records:
            month_key = r["date"].strftime("%Y-%m")
            pqp = pqp_map.get(month_key, latest_pqp_value)
            data.append({
                "date": month_key,
                "premium": r["premium"],
                "quota": r["quota"],
                "bids": r["bids"],
                "pqp": pqp
            })

        
        context["records"] = data
        context["dfp_ads"] = [] 

        return context



        from django.contrib import messages
from django.contrib.contenttypes.models import ContentType
from django.http.response import Http404
from django.http.response import HttpResponse
from django.shortcuts import render, redirect, reverse
from django.urls import reverse_lazy
from django.views.generic import DetailView, ListView, TemplateView, CreateView, View, RedirectView

from advertisement.models import Banner
from advertisement.models import Carousel
from cms.forms import InstallmentCalculatorForm
from common.mixins import MobileViewMixin
from dfp.models import GoogleAd
from directory.forms import DirectorySearchForm
from directory.models import Category as DirCat, Directory
from libs.django_user_agents.utils import get_and_set_user_agent
from listing.choices import ListingStatus
from listing.settings import *
from listing.forms import UsedBikesSearchForm, AccessoriesSearchForm, NewBikesSearchForm
from listing.models import *
from rental.forms import RentalBikeSearch
from rental.models import RentalBike
from .forms import ContactModelForm
from .models import Blog, Event, Page, Faq, Contact, Coe, AboutSale
from django.contrib.contenttypes.models import ContentType
from billing.models import Price
from alert.models import ShortList
from django.db.models import Count, OuterRef, Exists, Value, IntegerField, Subquery, CharField, Q, Case, When
from django.db.models import Manager
from django.contrib.contenttypes.models import ContentType
from django.db.models.functions import Coalesce, Concat
from urllib.parse import urlencode, parse_qs
from time import perf_counter

class Home(MobileViewMixin, TemplateView):
    template_name = 'cms/home.html'

    def get_context_data(self, **kwargs):
        cd = super(Home, self).get_context_data(**kwargs)
        # Search forms
        cd['page_name'] = 'HOME'
        # title
        cd['title'] = 'SGBikeMart - New & Used Bikes/MotorCycles for Sale in Singapore. Accessories,Reviews & Price.'

        user_agent = get_and_set_user_agent(self.request)
        if user_agent.is_mobile or user_agent.is_tablet:
            cd['latest_allbikes'] = ListIndex.objects.filter(live=True).order_by('-refresh_date')[:10]
            cd['latest_blogs'] = Blog.objects.filter(published=True)[:6]
            cd['carousel'] = Carousel.objects.for_mobile().all()
            cd['coe'] = Coe.get_latest()
        else:
            cd['directory_categories'] = DirCat.objects.values('name', 'slug')
            cd['accessories'] = Accessory.objects.filter(status=ListingStatus.live).order_by('-date_start')[:12]
            cd['latest_allbikes'] = ListIndex.objects.filter(live=True).order_by('-refresh_date')[:10]
            cd['featured_usedbikes'] = UsedBike.objects.filter(status=ListingStatus.live).prefetch_related("bike_model").order_by("?").all()[:10]
            cd['newbikes'] = NewBikeDealer.objects.prefetch_related(
                'new_bike', 'new_bike__bike_model', 'new_bike__bike_model__brand'
            ).live().order_by_ad_type_and_refresh().all()[:10]
            cd['dealers'] = Directory.objects.filter(featured_in_homepage=True).order_by('?')[:6]
            cd['accessories_count'] = Accessory.objects.filter(status=ListingStatus.live).count()
            cd['usedbikes_count'] = UsedBike.objects.filter(status=ListingStatus.live).count()
            cd['latest_update'] = Blog.objects.filter(published=True).order_by('-featured', '-created').first()
            cd['latest_blogs'] = Blog.objects.filter(published=True)[1:6]
        return cd


class Sell(MobileViewMixin, TemplateView):
    template_name = 'cms/sell.html'

    def get_context_data(self, **kwargs):
        cd = super(Sell, self).get_context_data(**kwargs)
        # cd['title'] = 'Sell Your Used Bike/MotorCycle & Accessories Online - SGBikemart'
        cd['title'] = 'Sell Motorcycle Singapore Fast | SGBikeMart Motorcycle Sale'
        cd['description'] = 'Post your used motorcycle for sale in Singapore. Reach thousands of riders & dealers. Free or upgraded listings available. Sell your bike fast with SGBikeMart.'
        return cd


class SellBikes(TemplateView):
    template_name = 'cms/sell_bikes.html'

    def get_context_data(self, **kwargs):
        cd = super(SellBikes, self).get_context_data(**kwargs)
        cd['title'] = 'Sell Your USed Bike/MotorCycle Online - SGBikemart'
        return cd

class SellMotorcycle(MobileViewMixin, TemplateView):
    template_name = 'cms/sell_motorcycle.html'

    def get_context_data(self, **kwargs):
        cd = super(SellMotorcycle, self).get_context_data(**kwargs)
        cd['title'] = 'Sell Your Used Motorcycle Online - SGBikemart'
        paid_price = Price.objects.filter(content_type=ContentType.objects.get_for_model(UsedBike), listing_type=PAID_AD).first()
        hot_price = Price.objects.filter(content_type=ContentType.objects.get_for_model(UsedBike), listing_type=HOT_AD).first()
        cd.update({
            "FREE_AD": FREE_AD,
            "PAID_AD": PAID_AD,
            "PAID_AD_PRICE": paid_price.advertiser_price if paid_price else 0,
            "HOT_AD_PRICE": hot_price.advertiser_price + paid_price.advertiser_price if hot_price else 0,
            "HOT_AD": HOT_AD,
        })
        return cd


class SellAccessories(MobileViewMixin, TemplateView):
    template_name = 'cms/sell_accessories.html'

    def get_context_data(self, **kwargs):
        cd = super(SellAccessories, self).get_context_data(**kwargs)
        cd['title'] = 'Sell Your Used MotorCycle/Bike Accessories Online - SGBikemart'
        paid_price = Price.objects.filter(content_type=ContentType.objects.get_for_model(Accessory), listing_type=PAID_AD).first()
        hot_price = Price.objects.filter(content_type=ContentType.objects.get_for_model(Accessory), listing_type=HOT_AD).first()
        
        cd.update({
            "FREE_AD": FREE_AD,
            "PAID_AD": PAID_AD,
            "PAID_AD_PRICE": paid_price.advertiser_price if paid_price else 0,
            "HOT_AD": HOT_AD,
            "HOT_AD_PRICE": hot_price.advertiser_price + paid_price.advertiser_price if hot_price else 0,
            
        })
        return cd

class AboutView(MobileViewMixin, TemplateView):
    template_name = 'cms/about.html' 

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)

        stats = AboutSale.objects.first()
        context["total_sales"] = (
            stats.total_sales_display() if stats else "0"
        )
        context["completed"] = (
            stats.completed_transactions() if stats else "0"
        )

        return context


class BlogLisView(MobileViewMixin, ListView):
    template_name = 'cms/blog.html'
    model = Blog
    paginate_by = 10
    context_object_name = 'entries'
    queryset = Blog.objects.filter(published=True)

    def get_context_data(self, **kwargs):
        cd = super(BlogLisView, self).get_context_data(**kwargs)
        cd['page_name'] = 'ARTICLES'
        # cd['title'] = 'Latest MotorCycle/Bike News, New MotorCycle Models & Specs - SGBikemart'
        cd['title'] = 'Motorcycle News & Reviews Singapore | SGBikeMart'
        cd['description'] = 'Latest motorcycle news, bike reviews, and rider updates in Singapore. Stay informed on new models, COE changes, gear launches and event coverage.'
        cd['keywords'] = 'motorcycle reviews, motorcycle Road test, motorcycle news, Vehicle news, Vehicle review, Motoring advice, motorcycle tips, motorbike advice, motorcycle guide, motorcycle tips, Motoring guide, automotive news, automotive advice'
        return cd
         
{% endcomment %}
    
    <title>{% block title %}SGVehicleLoans{% endblock %}</title>
</head>
<body>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
        <!-- Toggler button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collapse menu -->
        <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown">
            <!-- Logo -->
            <a class="navbar-brand" href="#">
                <img class="navbar-logo" src="{% static 'apploan/images/sgv-logo.png' %}" alt="logo-nav"
                    style="width: 210px; height: auto; margin-right:45px; object-fit: contain;">
            </a>

            <!-- Navbar items -->
            {% comment %}<ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'home' %}">
                        Home
                    </a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="financingDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Financing
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="financingDropdown">
                        <li><a class="dropdown-item" href="{% url 'financeUsed' %}">Used Car & Motorcycle Loan</a></li>
                        <li><a class="dropdown-item" href="{% url 'financeNew' %}">New Car & Motorcycle Loan</a></li>
                        <li><a class="dropdown-item" href="{% url 'financeDirect' %}">Direct Car & Motorcycle Buyer – Seller Loan</a></li>
                        <li><a class="dropdown-item" href="{% url 'financeCOECar' %}">COE Car Loan</a></li>
                        <li><a class="dropdown-item" href="{% url 'financeRefinance' %}">COE Refinancing</a></li>
                        <li><a class="dropdown-item" href="{% url 'financeInHouse' %}">In-House Car Loan</a></li>
                        <li><a class="dropdown-item" href="{% url 'financePHVCar' %}">Private Hire Vehicle (PHV) Car Loan</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="coeDropdown" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        COE Renewal
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="coeDropdown">
                        <li><a class="dropdown-item" href="{% url 'COERenewCar' %}">COE Renewal (Cars & Commercial Vehicles)</a></li>
                        <li><a class="dropdown-item" href="{% url 'COERenewMoto' %}">COE Renewal (Motorcycle)</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="coeDropdown" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Insurance
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="coeDropdown">
                        <li><a class="dropdown-item" href="{% url 'insCar' %}">Car Insurance</a></li>
                        <li><a class="dropdown-item" href="{% url 'insMotor' %}">Motorcycle Insurance</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="offersDropdown" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Offers
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="offersDropdown">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="resourcesDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Resources
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="resourcesDropdown">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="aboutDropdown" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        About Us
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="aboutDropdown">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>

                <li class="nav-item">
                    <a class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}" href="{% url 'contact' %}">
                        Contact
                    </a>
                </li>
            </ul>{% endcomment %}

            {% with s=menu_setting %}
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <ul class="navbar-nav">

                        {% if s.show_home %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}">Home</a>
                        </li>
                        {% endif %}

                        {% if s.show_financing %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Financing</a>
                            <ul class="dropdown-menu">
                                {% if s.finance_used %}
                                <li><a class="dropdown-item" href="{% url 'financeUsed' %}">Used Car & Motorcycle Loan</a></li>
                                {% endif %}
                                {% if s.finance_new %}
                                <li><a class="dropdown-item" href="{% url 'financeNew' %}">New Car & Motorcycle Loan</a></li>
                                {% endif %}
                                {% if s.finance_direct %}
                                <li><a class="dropdown-item" href="{% url 'financeDirect' %}">Direct Buyer – Seller Loan</a></li>
                                {% endif %}
                                {% if s.finance_coe_car %}
                                <li><a class="dropdown-item" href="{% url 'financeCOECar' %}">COE Car Loan</a></li>
                                {% endif %}
                                {% if s.finance_refinance %}
                                <li><a class="dropdown-item" href="{% url 'financeRefinance' %}">COE Refinancing</a></li>
                                {% endif %}
                                {% if s.finance_inhouse %}
                                <li><a class="dropdown-item" href="{% url 'financeInHouse' %}">In-House Car Loan</a></li>
                                {% endif %}
                                {% if s.finance_phv %}
                                <li><a class="dropdown-item" href="{% url 'financePHVCar' %}">PHV Car Loan</a></li>
                                {% endif %}
                            </ul>
                        </li>
                        {% endif %}

                        {% if s.show_coe %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">COE Renewal</a>
                            <ul class="dropdown-menu">
                                {% if s.coe_car %}
                                <li><a class="dropdown-item" href="{% url 'COERenewCar' %}">COE Renewal (Cars & Commercial Vehicles)</a></li>
                                {% endif %}
                                {% if s.coe_moto %}
                                <li><a class="dropdown-item" href="{% url 'COERenewMoto' %}">COE Renewal (Motorcycle)</a></li>
                                {% endif %}
                            </ul>
                        </li>
                        {% endif %}

                        {% if s.show_insurance %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Insurance</a>
                            <ul class="dropdown-menu">
                                {% if s.insurance_car %}
                                <li><a class="dropdown-item" href="{% url 'insCar' %}">Car Insurance</a></li>
                                {% endif %}
                                {% if s.insurance_motor %}
                                <li><a class="dropdown-item" href="{% url 'insMotor' %}">Motorcycle Insurance</a></li>
                                {% endif %}
                            </ul>
                        </li>
                        {% endif %}

                        {% if s.show_rates %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'rates' %}">Rates</a></li>
                        {% endif %}

                        {% if s.show_guides %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Guides</a>
                            <ul class="dropdown-menu">
                                {% if s.guides_calc %}
                                <li><a class="dropdown-item" href="{% url 'guidesCalc' %}">Car & Motorcyle Loan Calculator</a></li>
                                {% endif %}
                                {% if s.guides_faq %}
                                <li><a class="dropdown-item" href="{% url 'guidesFaq' %}">Loan FAQ</a></li>
                                {% endif %}
                                {% if s.guides_install %}
                                <li><a class="dropdown-item" href="{% url 'guidesInstall' %}">Loan Installment</a></li>
                                {% endif %}
                                {% if s.guides_pay %}
                                <li><a class="dropdown-item" href="{% url 'guidesPay' %}">Loan Payment</a></li>
                                {% endif %}
                            </ul>
                        </li>
                        {% endif %}
                        {% if s.show_about %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">About Us</a></li>
                        {% endif %}
                        {% if s.show_contact %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact</a></li>
                        {% endif %}

                    </ul>
                </nav>
            {% endwith %}
        </div>
    </nav>

    <!-- Main Content -->
    <div class="content">
        {% block content %}
        
        {% endblock %}
    </div>

    <footer class="footer-gradient text-light pt-5 pb-1">
        <div class="container">

            <div class="row">

            <!-- Company Info + Social Media -->
            <div class="col-12 col-md-4 mb-4">
                <h4 class="footer-title mb-3">SGVehicleLoans</h4>
                <p>400 Balestier Road,<br>
                Balestier Plaza #02-23,<br>
                Singapore 329802</p>
                <p><strong>Operating Hours:</strong><br>
                Mon–Fri: 10am–6pm<br>
                Sat: 12pm–4pm</p>

                <!-- Social Media -->
                <div class="mb-3">
                    <h6 class="footer-title">Follow Us</h6>
                    <a href="https://www.facebook.com/login" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/accounts/login/" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?phone=6589259233&text=Hi%2C%20SGVehicleLoans" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.tiktok.com/login" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                </div>

                <!-- Mini Map -->
                <div class="map-container rounded overflow-hidden shadow-sm">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.750498216391!2d103.8478215758166!3d1.3256235616514813!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da19d8ad2a9e11%3A0x1b8c2cdaf63e0fbb!2sBalestier%20Plaza!5e0!3m2!1sen!2smy!4v1764923928289!5m2!1sen!2smy"
                    width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>

            <!-- Services -->
            <div class="col-12 col-md-4 mb-4 ms-5">
                <h5 class="footer-title mb-3">Our Services</h5>

                <!-- Financing -->
                <div class="mb-3">
                    <h6 class="text-light">Financing</h6>
                    <ul class="list-unstyled">
                        <li class="service-item"><a href="{% url 'financeUsed' %}">Used Car & Motorcycle Loan</a></li>
                        <li class="service-item"><a href="{% url 'financeNew' %}">New Car & Motorcycle Loan</a></li>
                        <li class="service-item"><a href="{% url 'financeDirect' %}">Direct Buyer – Seller Loan</a></li>
                        <li class="service-item"><a href="{% url 'financeInHouse' %}">In-House Car Loan</a></li>
                        <li class="service-item"><a href="{% url 'financePHVCar' %}">PHV Car Loan</a></li>
                    </ul>
                </div>

                <!-- COE -->
                <div class="mb-3">
                    <h6 class="text-light">COE</h6>
                    <ul class="list-unstyled">
                        <li class="service-item"><a href="{% url 'financeCOECar' %}">COE Car Loan</a></li>
                        <li class="service-item"><a href="{% url 'financeRefinance' %}">COE Refinancing</a></li>
                        <li class="service-item"><a href="{% url 'COERenewCar' %}">COE Renewal (Cars & CV)</a></li>
                        <li class="service-item"><a href="{% url 'COERenewMoto' %}">COE Renewal (Motorcycle)</a></li>
                    </ul>
                </div>

                <!-- Insurance -->
                <div class="mb-3">
                    <h6 class="text-light">Insurance</h6>
                    <ul class="list-unstyled">
                        <li class="service-item"><a href="{% url 'insCar' %}">Car Insurance</a></li>
                        <li class="service-item"><a href="{% url 'insMotor' %}">Motorcycle Insurance</a></li>
                    </ul>
                </div>
            </div>

            <!-- Contact Numbers -->
            <div class="col-8 col-md-2 mb-4">
                <h5 class="footer-title mb-3">Contact Us</h5>
                <ul class="list-unstyled">
                <li class="mb-2"><strong>Hotline:</strong> (+65) 6444 4400</li>
                <li class="mb-2"><strong>Office:</strong> +65 6681 6778</li>
                <li class="mb-2"><strong>Fax:</strong> +65 6256 1229</li>
                </ul>
            </div>

            </div>

            <!-- Footer Bottom -->
            <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top border-secondary">
                <p class="mb-0">&copy; 2025 SGVehicleLoans Inc. All rights reserved.</p>
                <div>
                    <a href="https://www.facebook.com/login" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/accounts/login/" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?phone=6589259233&text=Hi%2C%20SGVehicleLoans" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.tiktok.com/login" class="text-light me-3 fs-5 social-icon" target="_blank" aria-label="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                </div>
            </div>
        </div>
        </footer>


    <!-- WhatsApp Floating Button -->
    <a href="https://api.whatsapp.com/send?phone=6589259233&text=Hi%2C%20SGVehicleLoans" target="_blank" class="whatsapp-float">
        <i class="fab fa-whatsapp"></i>
    </a>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    {% block extra_js %}{% endblock %}
</body>

<style>

.navbar-nav .nav-link {
    position: relative;
    color: #333;
    font-weight: 500;
    font-size: 1rem;
    padding: 0.5rem 1rem;
    transition: color 0.3s ease;
}

/* Highlight bar under active or hover link */
.navbar-nav .nav-link::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background-color: #960000ff;
    transition: all 0.3s ease;
    border-radius: 2px;
}

/* Active or hover state */
.navbar-nav .nav-link:hover::before,
.navbar-nav .nav-link.active::before {
    left: 0;
    width: 100%;
}

.navbar-nav .nav-link:hover {
    color: #960000ff;
}

/* Dropdown items hover */
.dropdown-menu .dropdown-item {
    transition: background-color 0.3s ease, color 0.3s ease;
}

.dropdown-menu .dropdown-item:hover {
    background-color: #e6e6e6;
    color: #960000ff;
}

/* Add spacing between navbar items */
.navbar-nav .nav-item {
    margin-left: 0.8rem;
    margin-right: 0.8rem;
}

.whatsapp-float {
    position: fixed;
    width: 60px;
    height: 60px;
    bottom: 40px;  /* distance from bottom */
    right: 40px;   /* distance from right */
    background-color: #25d366;
    color: white;
    border-radius: 50%;
    text-align: center;
    font-size: 30px;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s;
    text-decoration: none;
}

@media (max-width: 768px) {
    .whatsapp-float {
        bottom: 80px; /* adjust if it overlaps input fields */
    }
}

.whatsapp-float:hover {
    transform: scale(1.1);
    text-decoration: none;
    color: white;
}

@media (max-width: 576px) {
    .whatsapp-float {
        bottom: 20px;
        right: 18px;
        width: 50px;
        height: 50px;
        font-size: 28px;
    }
}

.content, .footer-gradient {
    overflow-x: hidden; /* only these sections */
}


/* Footer gradient background */
.footer-gradient {
    background: linear-gradient(120deg, #1C1C1C, #434343);
}

.footer-title {
    color: #B71C1C;
    font-weight: bold;
}

/* Social media hover */
.social-icon{
    text-decoration: none; 
    overflow: hidden;   
}

.social-icon:hover {
    color: #B71C1C !important; 
    transform: scale(1.2);
    transition: all 0.3s ease;
}

/* Service list styles */
.service-item {
    position: relative;
    padding-left: 18px;
    cursor: pointer;
    margin-bottom: 5px;
}

.service-item::before {
    content: "\f105"; 
    font-family: "Font Awesome 5 Free";
    font-weight: 900;
    position: absolute;
    left: 0;
    top: 0;
    color: #B71C1C; /* Tomato color for bullets */
}

.service-item:hover {
    color: #B71C1C;
    transition: all 0.3s ease;
}

.service-item a {
    display: block;   
    white-space: nowrap;  
    overflow: hidden;   
    text-overflow: ellipsis; 
    color: #fff;        
    text-decoration: none;  
    transition: color 0.3s; 
}

.service-item a:hover {
    color: #B71C1C;     
}

/* Map styling */
.map-container iframe {
    border-radius: 8px;
}

</style>

</html>
